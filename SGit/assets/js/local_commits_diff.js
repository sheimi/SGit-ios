// Generated by CoffeeScript 1.6.3
(function() {
  var colorDiff;

  colorDiff = function(index) {
    var changeType, changeTypeBlock, codeBlock, codes, diff, diffBlock, diffContent, highlighted, infoBlock, path, pathBlock;
    diff = CodeLoader.getDiff(index);
    if (!diff) {
      return;
    }
    changeType = CodeLoader.getChangeType(index);
    if (changeType === 'ADD') {
      path = CodeLoader.getNewPath(index);
    } else {
      path = CodeLoader.getOldPath(index);
    }
    highlighted = hljs.highlight("diff", diff, true);
    diffContent = highlighted.value.split('\n');
    codes = diffContent.slice(4).join('\n');
    diffBlock = $('<div>', {
      "class": 'diff-block'
    });
    infoBlock = $('<div>', {
      "class": 'info-block'
    });
    pathBlock = $('<div>', {
      "class": 'path-block'
    }).html(path);
    changeTypeBlock = $('<div>', {
      "class": 'change-type'
    }).html(changeType);
    infoBlock.append(changeTypeBlock);
    infoBlock.append(pathBlock);
    codeBlock = $('<code>').html(codes);
    codeBlock = $('<pre>', {
      "class": "diff"
    }).append(codeBlock);
    diffBlock.append(infoBlock);
    diffBlock.append(codeBlock);
    return $('body').append(diffBlock);
  };

  window.notifyEntriesReady = function() {
    var index, length, _i, _ref, _results;
    length = CodeLoader.getDiffSize();
    _results = [];
    for (index = _i = 0, _ref = length - 1; _i <= _ref; index = _i += 1) {
      _results.push(colorDiff(index));
    }
    return _results;
  };

  $(document).ready(function() {
    return CodeLoader.getDiffEntries();
  });

}).call(this);
